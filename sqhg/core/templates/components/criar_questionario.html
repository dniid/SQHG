<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Basic Title</title>

    <!-- [Links Partial here] -->
    <link rel="stylesheet" href="../../static/css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css"
        crossorigin="anonymous" />
    <script src="https://cdn.tailwindcss.com"></script>
</head>

<body>
    <!-- Basic website structure -->
    <div class="w-full h-screen">
        <div class="w-full h-full flex flex-col sm:flex-row p-3 sm:space-x-3">
            <!-- Navbar -->
            <!-- [Navbar Partial here] -->
            <!-- Mobile Nav -->
            <nav class="w-full h-fit rounded-t-xl px-5 py-2 shadow bg-[var(--honey-flower)] sm:hidden text-white flex">
                <div class="w-full h-full flex items-center">
                    <a href="">
                        <img class="h-14" src="../../static/assets/prati_minilogo.png" alt="">
                    </a>
                </div>
                <div id="mobileOpenMenu" class="hover:bg-[var(--vivid-violet)] rounded-xl px-4 py-2.5 w-fit">
                    <i class="fa-solid fa-bars text-3xl"></i>
                </div>
            </nav>
            <!-- Desktop Nav -->
            <nav id="nav"
                class="hidden sm:w-2/6 lg:w-1/6 xl:w-[13%] bg-[var(--honey-flower)] h-full rounded-xl sm:flex flex-col px-3 py-5 items-center space-y-7 ease-in duration-300">
                <a class="p-2 flex justify-center" href="">
                    <img class="w-32" src="../../static/assets/prati-logo.png" alt="">
                </a>
                <div class="flex flex-col w-full h-full space-y-3">
                    <!-- Items 1 -->
                    <div class="w-full h-fit  space-y-3">
                        <div id="openUserSubItems"
                            class="w-full bg-[var(--flushed-violet)] text-center text-white py-2 px-3 rounded-md cursor-pointer flex justify-between">
                            <div>
                                <i class="fa-solid fa-user"></i>
                            </div>
                            <span class="select-none">Usuários</span>
                            <div id="userChevronDown" class="hidden">
                                <i class="fa-solid fa-chevron-down"></i>
                            </div>
                            <div id="userChevronUp">
                                <i class="fa-solid fa-chevron-up"></i>
                            </div>
                        </div>
                        <div id="userSubItems" class="w-full flex justify-center space-x-3">
                            <div
                                class="w-1/2 bg-[var(--vivid-violet)] text-center text-white py-2 px-5 rounded-md cursor-pointer">
                                <a class="block" href="">
                                    <i class="fa-solid fa-plus"></i>
                                </a>
                            </div>
                            <div
                                class="w-1/2 bg-[var(--vivid-violet)] text-center text-white py-2 px-5 rounded-md cursor-pointer">
                                <a class="block" href="">
                                    <i class="fa-solid fa-list"></i>
                                </a>
                            </div>
                        </div>
                    </div>
                    <!-- Items 2 -->
                    <div class="w-full h-fit space-y-3">
                        <div id="openQuestionnairesSubItems"
                            class="w-full bg-[var(--flushed-violet)] text-center text-white py-2 px-3 rounded-md cursor-pointer flex justify-between">
                            <div>
                                <i class="fa-solid fa-question"></i>
                            </div>
                            <span class="select-none">Questionários</span>
                            <div id="questionnairesChevronDown" class="hidden">
                                <i class="fa-solid fa-chevron-down"></i>
                            </div>
                            <div id="questionnairesChevronUp">
                                <i class="fa-solid fa-chevron-up"></i>
                            </div>
                        </div>
                        <div id="questionnairesSubItems" class="w-full flex justify-center space-x-3">
                            <div
                                class="w-1/2 bg-[var(--vivid-violet)] text-center text-white py-2 px-5 rounded-md cursor-pointer">
                                <a href="">
                                    <i class="fa-solid fa-object-ungroup"></i>
                                </a>
                            </div>
                            <div
                                class="w-1/2 bg-[var(--vivid-violet)] text-center text-white py-2 px-5 rounded-md cursor-pointer">
                                <a href="">
                                    <i class="fa-solid fa-list"></i>
                                </a>
                            </div>
                        </div>
                    </div>
                    <!-- Items 3 -->
                    <div class="w-full h-fit space-y-3">
                        <div id="nav-click-2"
                            class="w-full bg-[var(--flushed-violet)] text-center text-white py-2 px-3 rounded-md cursor-pointer flex justify-between">
                            <div>
                                <i class="fa-solid fa-file-lines"></i>
                            </div>
                            <span class="select-none">Relatórios</span>
                            <div id="nav-chevron-down-2" class="hidden">
                                <i class="fa-solid fa-chevron-down"></i>
                            </div>
                            <div class="invisible" id="nav-chevron-up-2">
                                <i class="fa-solid fa-chevron-up"></i>
                            </div>
                        </div>
                    </div>
                    <a href="tel:4521031166">
                        <div class="w-full h-full space-x-3 items-center flex flex-col">
                            <div class="fixed bottom-10 px-2 flex flex-col items-center text-white space-y-3 text-xl">
                                <div class=" flex justify-center" href="">
                                    <img class="w-24" src="../../static/assets/atendimento-geral.svg" alt="">
                                </div>
                                <div class="flex flex-col items-center text-xl space-y-2">
                                    <span class="w-40 text-center">Atendimento Geral</span>
                                    <span class="border border-white rounded-md py-1 px-5">45 2103-1166</span>
                                </div>
                            </div>
                        </div>
                    </a>
                </div>
            </nav>
            <!-- Mobile Menu -->
            <section id="mobileMenu"
                class="hidden h-full w-full rounded-b-xl flex flex-col px-3 pt-5 items-center space-y-7 bg-[var(--honey-flower)] sm:hidden">
                <div class="w-full space-y-3">
                    <!-- Items 1 -->
                    <div class="w-full space-y-3">
                        <div id="mobileOpenUserSubItems"
                            class="w-full bg-[var(--flushed-violet)] text-center text-white py-2 px-3 rounded-md cursor-pointer flex justify-between">
                            <div>
                                <i class="fa-solid fa-user"></i>
                            </div>
                            <span class="select-none">Usuários</span>
                            <div id="mobileUserChevronDown" class="hidden">
                                <i class="fa-solid fa-chevron-down"></i>
                            </div>
                            <div id="mobileUserChevronUp">
                                <i class="fa-solid fa-chevron-up"></i>
                            </div>
                        </div>
                        <div id="mobileUserSubItems" class="w-full flex justify-center space-x-3">
                            <div
                                class="w-1/2 bg-[var(--vivid-violet)] text-center text-white py-2 px-5 rounded-md cursor-pointer">
                                <a class="block" href="">
                                    <i class="fa-solid fa-plus"></i>
                                </a>
                            </div>
                            <div
                                class="w-1/2 bg-[var(--vivid-violet)] text-center text-white py-2 px-5 rounded-md cursor-pointer">
                                <a class="block" href="">
                                    <i class="fa-solid fa-list"></i>
                                </a>
                            </div>
                        </div>
                    </div>
                    <!-- Items 2 -->
                    <div class="w-full space-y-3">
                        <div id="mobileOpenQuestionnairesSubItems"
                            class="w-full bg-[var(--flushed-violet)] text-center text-white py-2 px-3 rounded-md cursor-pointer flex justify-between">
                            <div>
                                <i class="fa-solid fa-question"></i>
                            </div>
                            <span class="select-none">Questionários</span>
                            <div id="mobileQuestionnairesChevronDown" class="hidden">
                                <i class="fa-solid fa-chevron-down"></i>
                            </div>
                            <div id="mobileQuestionnairesChevronUp">
                                <i class="fa-solid fa-chevron-up"></i>
                            </div>
                        </div>
                        <div id="mobileQuestionnairesSubItems" class="w-full flex justify-center space-x-3">
                            <div
                                class="w-1/2 bg-[var(--vivid-violet)] text-center text-white py-2 px-5 rounded-md cursor-pointer">
                                <a href="">
                                    <i class="fa-solid fa-object-ungroup"></i>
                                </a>
                            </div>
                            <div
                                class="w-1/2 bg-[var(--vivid-violet)] text-center text-white py-2 px-5 rounded-md cursor-pointer">
                                <a href="">
                                    <i class="fa-solid fa-list"></i>
                                </a>
                            </div>
                        </div>
                    </div>
                    <!-- Items 3 -->
                    <div class="w-full space-y-3">
                        <div id="movile-nav-click-2"
                            class="w-full bg-[var(--flushed-violet)] text-center text-white py-2 px-3 rounded-md cursor-pointer flex justify-between">
                            <div>
                                <i class="fa-solid fa-file-lines"></i>
                            </div>
                            <span class="select-none">Relatórios</span>
                            <div id="mobile-nav-chevron-down-2" class="hidden">
                                <i class="fa-solid fa-chevron-down"></i>
                            </div>
                            <div class="invisible" id="mobile-nav-chevron-up-2">
                                <i class="fa-solid fa-chevron-up"></i>
                            </div>
                        </div>
                    </div>
                    <a href="tel:4521031166">
                        <div class="w-full h-full space-x-3 items-center flex flex-col">
                            <div class="fixed bottom-10 px-2 flex flex-col items-center text-white space-y-3 text-xl">
                                <div class=" flex justify-center" href="">
                                    <img class="w-24" src="../../static/assets/atendimento-geral.svg" alt="">
                                </div>
                                <div class="flex flex-col items-center text-xl space-y-2">
                                    <span class="w-40 text-center">Atendimento Geral</span>
                                    <span class="border border-white rounded-md py-1 px-5">45 2103-1166</span>
                                </div>
                            </div>
                        </div>
                    </a>
                </div>
            </section>

            <!-- Content -->
            <section id="bodyContent"
                class="w-full sm:4/6 lg:w-5/6 xl:w-[90%] bg-[var(--gallery)] rounded-b-xl sm:rounded-xl overflow-auto py-3 px-5">
                <div class="flex flex-col items-center h-full">
                    <div class="top-bar bg-white h-65 rounded-xl w-full mb-5">
                        <div class="title">
                            <div class="text-center">
                                <h1 class="text-2xl font-bold py-3 text-[var(--vivid-violet)]">
                                    Novo Modelo de Questionário
                                </h1>
                            </div>
                        </div>
                    </div>

                    <div id="surveyForm" class="w-full md:w-2/3 h-full flex flex-col">
                        <div class="w-full flex flex-col p-5 rounded-xl bg-white text-2xl text-[var(--vivid-violet)] border-t-8 border-[var(--vivid-violet)] mb-3 space-y-2 h-fit">
                            <div class="w-full flex items-center">
                                <div class="w-full text-center flex justify-center">
                                    <span id="surveyName" class="font-bold cursor-pointer border-b-2 w-full break-normal px-5" tabindex="0">Nome do Questionário</span>
                                    <input id="surveyNameInput" class="font-bold text-center hidden border-b-2 focus:outline-0 px-5 w-full" type="text" autocomplete="off">
                                </div>
                            </div>
                            <div class="w-full flex items-center italic text-lg text-[var(--flash-grey)]">
                                <div class="w-full text-center flex justify-center">
                                    <div id="surveyDescription" class="cursor-pointer border-b w-full px-5 break-normal" tabindex="0">Descrição do modelo do questionário</div>
                                    <input id="surveyDescriptionInput" class="text-center italic hidden border-b focus:outline-0 px-5 w-full h-fit" type="text" autocomplete="off">
                                </div>
                            </div>
                        </div>

                        <div class="questions-container">
                            <div class="question-form-template flex gap-1 w-full mb-3 hidden">
                                <div class="grow flex flex-col p-5 rounded-xl bg-white text-center text-xl">
                                    <div class="items-center text-xl text-[var(--vivid-violet)] mb-5">
                                        <div class="flex flex-col space-y-3">
                                            <div class="w-full flex flex-col md:flex-row space-y-2 md:space-y-0 text-center flex justify-start items-center">
                                                <div class="flex w-full">
                                                    <div class="text-2xl font-bold text-[var(--vivid-violet)] mr-4 cursor-pointer btn-remove-question">
                                                        <i class="fa-solid fa-square-minus"></i>
                                                    </div>
                                                    <label class="font-bold">
                                                        Questão:
                                                    </label>
                                                    <input class="w-full mx-4 px-2 text-start text-base text-black border-b border-[var(--flushed-violet)] focus:outline-0"
                                                        type="text" autocomplete="off">
                                                </div>
                                                <select class="w-full md:w-fit question-type border rounded border-[var(--flushed-violet)] bg-white text-base text-black px-2 py-0.5 focus:outline-0">
                                                    <option value="likert">De 0 a 10</option>
                                                    <option value="alternative">Alternativas</option>
                                                    <option value="multiple">Múltipla Escolha</option>
                                                    <option value="open">Aberta</option>
                                                </select>
                                            </div>
                                            <div class="question-type-body w-full flex justify-center bg-gray-100 rounded">
                                                <div class="type likert-type flex justify-center space-x-5 p-5 flex-wrap pointer-events-none opacity-50">
                                                    <div>
                                                        <input type="checkbox">
                                                        <label>0</label>
                                                    </div>
                                                    <div>
                                                        <input type="checkbox">
                                                        <label>1</label>
                                                    </div>
                                                    <div>
                                                        <input type="checkbox">
                                                        <label>2</label>
                                                    </div>
                                                    <div>
                                                        <input type="checkbox">
                                                        <label>3</label>
                                                    </div>
                                                    <div>
                                                        <input type="checkbox">
                                                        <label>4</label>
                                                    </div>
                                                    <div>
                                                        <input type="checkbox">
                                                        <label>5</label>
                                                    </div>
                                                    <div>
                                                        <input type="checkbox">
                                                        <label>6</label>
                                                    </div>
                                                    <div>
                                                        <input type="checkbox">
                                                        <label>7</label>
                                                    </div>
                                                    <div>
                                                        <input type="checkbox">
                                                        <label>8</label>
                                                    </div>
                                                    <div>
                                                        <input type="checkbox">
                                                        <label>9</label>
                                                    </div>
                                                    <div>
                                                        <input type="checkbox">
                                                        <label>10</label>
                                                    </div>
                                                </div>
                                                <div class="type alternative-type hidden w-full p-5 flex flex-col">
                                                    <div class="alternatives-container">
                                                        <div class="alternative-form-template flex justify-between hidden">
                                                            <div class="text-2xl font-bold text-[var(--vivid-violet)] mr-4 cursor-pointer btn-remove-alternative w-fit">
                                                                <i class="fa-solid fa-square-minus"></i>
                                                            </div>
                                                            <div class="w-full">
                                                                <input class="w-full px-2 text-start text-base text-black border-b border-[var(--flushed-violet)] focus:outline-0"
                                                            type="text" autocomplete="off">
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="flex justify-start w-full mt-5">
                                                        <button class="add-alternative-btn bg-[var(--vivid-violet)] h-full aspect-w-1 py-1 px-2 rounded-md text-gray-50 hover:bg-[var(--honey-flower)] text-sm">
                                                            <i class="fa-solid fa-plus"></i>
                                                        </button>
                                                    </div>
                                                </div>
                                                <div class="type multiple-type hidden">b</div>
                                                <div class="type open-type hidden flex justify-center w-full items-center p-5 pointer-events-none opacity-50">
                                                    <textarea class="w-full h-32"></textarea>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="w-full flex flex-col mb-3">
                            <div class="flex justify-start w-full">
                                <button id="addQuestion" class="bg-[var(--vivid-violet)] h-full aspect-w-1 py-2 px-3 rounded-md text-gray-50 hover:bg-[var(--honey-flower)]">
                                    <i class="fa-solid fa-plus"></i>
                                </button>
                            </div>
                        </div>

                        <div class="w-full flex flex-col">
                            <div class="flex gap-4 justify-end w-full">
                                <button class="bg-[var(--vivid-violet)] w-40 py-2 rounded-md text-gray-50 hover:bg-[var(--honey-flower)]">
                                    Cancelar
                                </button>
                                <button class="bg-[var(--vivid-violet)] w-40 py-2 rounded-md text-gray-50 hover:bg-[var(--honey-flower)]">
                                    Gravar
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </div>
    <!-- [Scripts Partial here] -->
    <script src="../../static/js/navbar.js"></script>
    <script>
        let addQuestionButton = document.getElementById('addQuestion');
        addQuestionButton.addEventListener('click', addNewQuestion);

        function addNewQuestion() {
            let questionsContainer = document.querySelector('.questions-container');
            let question = document.querySelector('.question-form-template').cloneNode(true);
            question.classList.remove('question-form-template', 'hidden');
            question.classList.add('question-form');
            questionsContainer.appendChild(question);

            let removeButton = question.querySelector('.btn-remove-question');
            removeButton.addEventListener('click', (el) => {
                removeButton.closest('.question-form').remove();
            });

            let questionType = question.querySelector('.question-type');
            let questionTypeBody = question.querySelector('.question-type-body');
            questionType.addEventListener('change', (qt) => {
                let selectedType = qt.target.value;
                let divsNotHidden = questionTypeBody.querySelectorAll('.type:not(.hidden)')
                divsNotHidden.forEach(dnh => {
                    dnh.classList.add('hidden');
                });
                let alternativesContainer = questionTypeBody.querySelector('.alternatives-container')

                if (selectedType == 'likert') {
                    (questionTypeBody.querySelector('.likert-type')).classList.remove('hidden');
                } else if (selectedType === 'alternative') {
                    (questionTypeBody.querySelector('.alternative-type')).classList.remove('hidden');
                    let addAlternativeButton = questionTypeBody.querySelector('.add-alternative-btn');
                    addAlternativeButton.addEventListener('click', function(){addNewAlternative(alternativesContainer)});
                    addNewAlternative(alternativesContainer);
                } else if (selectedType === 'multiple') {
                    (questionTypeBody.querySelector('.multiple-type')).classList.remove('hidden');
                } else if (selectedType === 'open') {
                    (questionTypeBody.querySelector('.open-type')).classList.remove('hidden');
                }
            });
        };

        let questionHead = document.querySelectorAll('#surveyName, #surveyDescription');
        questionHead.forEach(el => {
            el.addEventListener('focus', () => {
                let input = el.parentNode.querySelector('input');

                el.classList.add("hidden");
                input.classList.remove("hidden");
                input.focus();

                input.addEventListener('blur', () => {
                    const inputValue = input.value;

                    if (!(input.value.trim() === "")) {
                        el.innerHTML = inputValue;
                        el.classList.remove("hidden");
                        input.classList.add("hidden");
                    }
                });
            });
        });

        function addNewAlternative(container) {
            let alternative = container.querySelector('.alternative-form-template').cloneNode(true);
            alternative.classList.remove('alternative-form-template', 'hidden');
            alternative.classList.add('alternative-form');
            container.appendChild(alternative);

            let removeAlternativeButton = alternative.querySelector('.btn-remove-alternative');
            removeAlternativeButton.addEventListener('click', (el) => {
                removeAlternativeButton.closest('.alternative-form').remove();
            });
        };

        addNewQuestion();

    </script>
</body>

</html>
